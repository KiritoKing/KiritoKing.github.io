function initTOC(){Global.utils.navItems=document.querySelectorAll(".post-toc-wrap .post-toc li");if(Global.utils.navItems.length>0){Global.utils={...Global.utils,updateActiveTOCLink(){if(!Array.isArray(Global.utils.sections))return;let t=Global.utils.sections.findIndex(t=>{return t&&t.getBoundingClientRect().top-100>0});if(t===-1){t=Global.utils.sections.length-1}else if(t>0){t--}this.activateTOCLink(t)},registerTOCScroll(){Global.utils.sections=[...document.querySelectorAll(".post-toc li a.nav-link")].map(t=>{const e=document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""));return e})},activateTOCLink(t){const e=document.querySelectorAll(".post-toc li a.nav-link")[t];if(!e||e.classList.contains("active-current")){return}document.querySelectorAll(".post-toc .active").forEach(t=>{t.classList.remove("active","active-current")});e.classList.add("active","active-current");const o=document.querySelector(".toc-content-container");const l=o.getBoundingClientRect().top;const n=o.offsetHeight>window.innerHeight?(o.offsetHeight-window.innerHeight)/2:0;const i=e.getBoundingClientRect().top-l;const c=Math.max(document.documentElement.clientHeight,window.innerHeight||0);const s=i-c/2+e.offsetHeight/2-n;const a=o.scrollTop+s;o.scrollTo({top:a,behavior:"smooth"})},showTOCAside(){const t=()=>{const t=Global.getStyleStatus();const e="isOpenPageAside";if(t&&t.hasOwnProperty(e)){Global.utils.TocToggle.pageAsideHandleOfTOC(t[e])}else{Global.utils.TocToggle.pageAsideHandleOfTOC(true)}};const e="init_open";if(Global.theme_config.articles.toc.hasOwnProperty(e)){Global.theme_config.articles.toc[e]?t():Global.utils.TocToggle.pageAsideHandleOfTOC(false)}else{t()}}};Global.utils.showTOCAside();Global.utils.registerTOCScroll()}else{document.querySelectorAll(".toc-content-container, .toc-marker").forEach(t=>{t.remove()})}}try{swup.hooks.on("page:view",()=>{initTOC()})}catch(t){}document.addEventListener("DOMContentLoaded",initTOC);