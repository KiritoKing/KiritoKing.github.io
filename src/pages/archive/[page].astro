---
import type { GetStaticPaths, InferGetStaticPropsType } from 'astro'
import { getPosts } from '@/utils'
import PostListView from '@/components/PostsListView'
import BaseLayout from '@/layouts/BaseLayout'
import Pagination from '@/components/Pagination'

export const getStaticPaths = (async ({ paginate }) => {
	const posts = await getPosts()
	return paginate(posts, {
		pageSize: 10
	})
}) satisfies GetStaticPaths

type Props = InferGetStaticPropsType<typeof getStaticPaths>

// 所有分页数据都在 "page" 参数中传递
const { page } = Astro.props
---

<BaseLayout title='所有博客'>
	<PostListView posts={page.data} groupByMonth />
	<Pagination basePath='/archive' currentPage={page.currentPage} total={page.lastPage} />
</BaseLayout>

<!-- 显示当前页面。也可以使用 Astro.params.page！-->
