<!DOCTYPE html><html lang="zh-CN,default"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="Hexo Theme Redefine"><meta name="author" content="ChlorineC"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="canonical" href="https://kiritoking.github.io/posts/2103510996/"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="revisit-after" content="1 days"><meta name="description" content="ä»Šå¤©å†™éœ€æ±‚çš„æ—¶å€™è¢«mentoræ•²æ‰“äº†ï¼Œè¯´éšä¾¿ç”¨&#96;useCallback&#96;ä¸å¥½ï¼Œä½†æ²¡æœ‰ç»†è¯´åŸå› ã€‚æ­¤å‰åœ¨è·Ÿå…¶ä»–è€å“¥äº¤æµçš„æ—¶å€™ä¹Ÿå‘Šè¯‰æˆ‘è¯´èƒ½ä¸ç”¨å°±ä¸ç”¨ï¼Œæˆ‘ä¹Ÿå¾ˆå¥½å¥‡ä¸ºä»€ä¹ˆï¼Œè¿™é‡Œå°±æ¥å¥½å¥½æ·±ç©¶ä¸€ä¸‹&#96;useCallback&#96;å’Œ&#96;useMemo&#96;ï¼Œä»¥åŠå®ƒä»¬åˆ°åº•åº”è¯¥åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ã€‚"><meta property="og:type" content="article"><meta property="og:title" content="ä½ çœŸçš„éœ€è¦useMemoå’ŒuseCallbackå—"><meta property="og:url" content="https://kiritoking.github.io/posts/2103510996/index.html"><meta property="og:site_name" content="Top-Down Web Techs"><meta property="og:description" content="ä»Šå¤©å†™éœ€æ±‚çš„æ—¶å€™è¢«mentoræ•²æ‰“äº†ï¼Œè¯´éšä¾¿ç”¨&#96;useCallback&#96;ä¸å¥½ï¼Œä½†æ²¡æœ‰ç»†è¯´åŸå› ã€‚æ­¤å‰åœ¨è·Ÿå…¶ä»–è€å“¥äº¤æµçš„æ—¶å€™ä¹Ÿå‘Šè¯‰æˆ‘è¯´èƒ½ä¸ç”¨å°±ä¸ç”¨ï¼Œæˆ‘ä¹Ÿå¾ˆå¥½å¥‡ä¸ºä»€ä¹ˆï¼Œè¿™é‡Œå°±æ¥å¥½å¥½æ·±ç©¶ä¸€ä¸‹&#96;useCallback&#96;å’Œ&#96;useMemo&#96;ï¼Œä»¥åŠå®ƒä»¬åˆ°åº•åº”è¯¥åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ã€‚"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163301.png"><meta property="og:image" content="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163304.png"><meta property="og:image" content="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163311.png"><meta property="og:image" content="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163316.png"><meta property="og:image" content="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163327.png"><meta property="og:image" content="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163333.gif"><meta property="article:published_time" content="2023-08-25T12:20:08.301Z"><meta property="article:modified_time" content="2023-08-25T12:20:08.301Z"><meta property="article:author" content="Chlorine"><meta property="article:tag" content="æ€§èƒ½ä¼˜åŒ–"><meta property="article:tag" content="react"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163301.png"><link rel="icon" type="image/png" href="/images/favicon.ico" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico"><meta name="theme-color" content="#A31F34"><link rel="shortcut icon" href="/images/favicon.ico"><title>ä½ çœŸçš„éœ€è¦useMemoå’ŒuseCallbackå— - Top-Down Web</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/build/styles.css"><link rel="stylesheet" href="/fonts/fonts.css"><link rel="stylesheet" href="/fonts/Satoshi/satoshi.css"><link rel="stylesheet" href="/fonts/Chillax/chillax.css"><script id="hexo-configurations">let Global=window.Global||{};Global.hexo_config={hostname:"kiritoking.github.io",root:"/",language:["zh-CN","default"],path:"search.xml"},Global.theme_config={articles:{style:{font_size:"16px",line_height:1.5,image_border_radius:"14px",image_alignment:"center",image_caption:!1,link_icon:!0},word_count:{enable:!0,count:!0,min2read:!0},author_label:{enable:!0,auto:!1,list:[]},code_block:{copy:!0,style:"simple",font:{enable:!1,family:null,url:null}},toc:{enable:!0,max_depth:3,number:!1,expand:!0,init_open:!0},copyright:!0,lazyload:!0,recommendation:{enable:!1,title:"æ¨èé˜…è¯»",limit:3,mobile_limit:2,placeholder:"/images/wallhaven-wqery6-light.webp",skip_dirs:[]}},colors:{primary:"#A31F34",secondary:null},global:{fonts:{chinese:{enable:!1,family:null,url:null},english:{enable:!1,family:null,url:null}},content_max_width:"1000px",sidebar_width:"210px",hover:{shadow:!0,scale:!1},scroll_progress:{bar:!1,percentage:!1},website_counter:{url:"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",enable:!0,site_pv:!0,site_uv:!0,post_pv:!0},single_page:!0,open_graph:!0,google_analytics:{enable:!1,id:null},chinese:{enable:!1,family:"Noto Sans SC",url:"https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap"},busuanzi_counter:{enable:!1,site_pv:!1,site_uv:!1,post_pv:!1}},home_banner:{enable:!0,style:"fixed",image:{light:"/images/wallhaven-wqery6-light.webp",dark:"/images/wallhaven-wqery6-dark.webp"},title:"Develop web apps from top to down.",subtitle:{text:["Stay Hungry, Stay Foolish.","Keep Your Curiosity.","Top to Down, Front to Back."],hitokoto:{enable:!1,api:"https://v1.hitokoto.cn"},typing_speed:100,backing_speed:80,starting_delay:500,backing_delay:1500,loop:!0,smart_backspace:!0},text_color:{light:"#fff",dark:"#d1d1b6"},text_style:{title_size:"2.8rem",subtitle_size:"1.5rem",line_height:1.2},custom_font:{enable:!1,family:null,url:null},social_links:{enable:!0,links:{github:"https://github.com/KiritoKing",instagram:null,zhihu:"https://www.zhihu.com/people/kirito-38",twitter:null,email:null,bilibili:"https://space.bilibili.com/8408315"},qrs:{weixin:null}}},plugins:{feed:{enable:!1},aplayer:{enable:!1,type:"fixed",audios:[{name:null,artist:null,url:null,cover:null}]},mermaid:{enable:!1,version:"9.3.0"}},version:"2.4.4",navbar:{auto_hide:!0,color:{left:"#f78736",right:"#367df7",transparency:35},links:{Home:{path:"/",icon:"fa-regular fa-house"},"æ–‡ç« ":{icon:"fa-solid fa-newspaper",submenus:{"åˆ†ç±»":"/categories/","æ ‡ç­¾":"/tags/","å½’æ¡£":"/archives/"}},"ç®€å†":{icon:"fa-solid fa-address-card",path:"https://www.wolai.com/kiritoking/4WWg85fMbYGinKhXQb83vw"},"å‹é“¾":{icon:"fa-solid fa-link",path:"/links/"},Github:{path:"https://www.github.com/KiritoKing",icon:"fa-brands fa-github"}},search:{enable:!0,preload:!0}},page_templates:{friends_column:2,tags_style:"blur"},home:{sidebar:{enable:!0,position:"left",first_item:"menu",announcement:null,links:{"å½’æ¡£":{icon:"fa-regular fa-archive",path:"/archives/"},"æ ‡ç­¾":{icon:"fa-regular fa-tags",path:"/tags"},"åˆ†ç±»":{path:"/categories",icon:"fa-regular fa-folder"}},annoucement:null},article_date_format:"auto",categories:{enable:!0,limit:3},tags:{enable:!0,limit:3}},footerStart:"2023/04/17 14:44:44"},Global.language_ago={second:"%s seconds ago",minute:"%s minutes ago",hour:"%s hours ago",day:"%s days ago",week:"%s weeks ago",month:"%s months ago",year:"%s years ago"},Global.data_config={masonry:!1}</script><link rel="stylesheet" href="/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="/fontawesome/brands.min.css"><link rel="stylesheet" href="/fontawesome/solid.min.css"><link rel="stylesheet" href="/fontawesome/regular.min.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="progress-bar-container"><span class="pjax-progress-bar"></span> <span class="swup-progress-icon"><i class="fa-solid fa-circle-notch fa-spin"></i></span></div><main class="page-container" id="swup"><div class="main-content-container"><div class="main-content-header"><header class="navbar-container"><div class="navbar-content"><div class="left"><a class="logo-title" href="https://kiritoking.github.io/">Top-Down Web</a></div><div class="right"><div class="desktop"><ul class="navbar-list"><li class="navbar-item"><a href="/"><i class="fa-regular fa-house"></i> é¦–é¡µ</a></li><li class="navbar-item"><a class="has-dropdown" href="#" onclick="return!1"><i class="fa-solid fa-newspaper"></i> æ–‡ç« &nbsp;<i class="fa-solid fa-chevron-down"></i></a><ul class="sub-menu"><li><a href="/categories/">åˆ†ç±»</a></li><li><a href="/tags/">æ ‡ç­¾</a></li><li><a href="/archives/">å½’æ¡£</a></li></ul></li><li class="navbar-item"><a target="_blank" rel="noopener" href="https://www.wolai.com/kiritoking/4WWg85fMbYGinKhXQb83vw"><i class="fa-solid fa-address-card"></i> ç®€å†</a></li><li class="navbar-item"><a href="/links/"><i class="fa-solid fa-link"></i> å‹é“¾</a></li><li class="navbar-item"><a target="_blank" rel="noopener" href="https://www.github.com/KiritoKing"><i class="fa-brands fa-github"></i> GITHUB</a></li><li class="navbar-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div><div class="icon-item navbar-bar"><div class="navbar-bar-middle"></div></div></div></div></div><div class="navbar-drawer w-full absolute top-0 left-0 bg-background-color"><ul class="drawer-navbar-list flex flex-col justify-start items-center"><li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center"><a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group" href="/"><i class="fa-regular fa-house"></i> é¦–é¡µ</a></li><li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center"><a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group has-dropdown" href="#" onclick="return!1"><i class="fa-solid fa-newspaper"></i> æ–‡ç« &nbsp;<i class="group-hover:rotate-180 transition-transform fa-solid fa-chevron-down"></i></a></li><li class="text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="py-0.5" href="/categories/">åˆ†ç±»</a></li><li class="text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="py-0.5" href="/tags/">æ ‡ç­¾</a></li><li class="text-base flex justify-center items-center hover:underline active:underline hover:underline-offset-1 rounded-3xl"><a class="py-0.5" href="/archives/">å½’æ¡£</a></li><li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center"><a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group" target="_blank" rel="noopener" href="https://www.wolai.com/kiritoking/4WWg85fMbYGinKhXQb83vw"><i class="fa-solid fa-address-card"></i> ç®€å†</a></li><li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center"><a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group" href="/links/"><i class="fa-solid fa-link"></i> å‹é“¾</a></li><li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center"><a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group" target="_blank" rel="noopener" href="https://www.github.com/KiritoKing"><i class="fa-brands fa-github"></i> GITHUB</a></li></ul></div><div class="window-mask"></div></header></div><div class="main-content-body"><div class="main-content"><div class="post-page-container"><div class="article-content-container"><div class="article-title"><h1 class="article-title-regular">ä½ çœŸçš„éœ€è¦useMemoå’ŒuseCallbackå—</h1></div><div class="article-header"><div class="avatar"><img src="/images/avatar.jpg"></div><div class="info"><div class="author"><span class="name">ChlorineC</span> <span class="author-label">Lv3</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fa-regular fa-pen-fancy"></i>&nbsp; <span class="desktop">2023-08-25 12:20:08</span> <span class="mobile">2023-08-25 12:20:08</span> <span class="hover-info">åˆ›å»º</span> </span><span class="article-date article-meta-item"><i class="fa-regular fa-wrench"></i>&nbsp; <span class="desktop">2023-08-25 12:20:08</span> <span class="mobile">2023-08-25 12:20:08</span> <span class="hover-info">æ›´æ–°</span> </span><span class="article-categories article-meta-item"><i class="fa-regular fa-folders"></i>&nbsp;<ul><li><a href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>&nbsp;</li><li>></li><li><a href="/categories/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5React/">æ·±å…¥React</a>&nbsp;</li></ul></span><span class="article-tags article-meta-item"><i class="fa-regular fa-tags"></i>&nbsp;<ul><li><a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">æ€§èƒ½ä¼˜åŒ–</a>&nbsp;</li><li>| <a href="/tags/react/">react</a>&nbsp;</li></ul></span><span class="article-pv article-meta-item"><i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body"><h2 id="ç›®å½•">ç›®å½•</h2><ul><li><a href="#%E4%BB%8EuseMemo%E5%BC%80%E5%A7%8B">ä»useMemoå¼€å§‹</a><ul><li><a href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7">è®¡ç®—å±æ€§ï¼Ÿ</a></li><li><a href="#useMemo%E7%9A%84%E7%9C%9F%E5%AE%9E%E7%94%A8%E9%80%94">useMemoçš„çœŸå®ç”¨é€”</a><ul><li><a href="#%E5%87%8F%E5%B0%91%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E8%AE%A1%E7%AE%97">å‡å°‘ä¸å¿…è¦çš„è®¡ç®—</a></li><li><a href="#%E9%81%BF%E5%85%8D%E5%A4%8D%E6%9D%82%E7%BB%84%E4%BB%B6%E6%84%8F%E5%A4%96%E5%88%B7%E6%96%B0">é¿å…å¤æ‚ç»„ä»¶æ„å¤–åˆ·æ–°</a></li></ul></li><li><a href="#%E5%88%B7%E6%96%B0%E5%88%A4%E6%96%AD%E6%9C%BA%E5%88%B6">åˆ·æ–°åˆ¤æ–­æœºåˆ¶</a></li><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%A6%81%E9%9A%8F%E4%BE%BF%E7%94%A8useMemo">ä¸ºä»€ä¹ˆä¸è¦éšä¾¿ç”¨useMemo</a><ul><li><a href="#useMemo-%E7%9A%84%E6%80%A7%E8%83%BD%E5%BC%80%E9%94%80">useMemo çš„æ€§èƒ½å¼€é”€</a></li></ul></li></ul></li><li><a href="#%E5%86%8D%E7%9C%8BuseCallback">å†çœ‹useCallback</a><ul><li><a href="#useCallback%E7%9A%84%E7%9C%9F%E6%AD%A3%E7%94%A8%E9%80%94">useCallbackçš„çœŸæ­£ç”¨é€”</a></li><li><a href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81useCallback">ä»€ä¹ˆæ—¶å€™éœ€è¦useCallback</a></li><li><a href="#%E5%85%B6%E4%BB%96%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88">å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆ</a><ul><li><a href="#useEffect%E9%97%AD%E5%8C%85">useEffecté—­åŒ…</a></li><li><a href="#%E4%BD%BF%E7%94%A8useReducer">ä½¿ç”¨useReducer</a></li></ul></li></ul></li><li><a href="#%E9%87%8D%E6%96%B0%E6%80%9D%E8%80%83%E7%BC%93%E5%AD%98Hook%E7%9A%84%E4%BD%BF%E7%94%A8">é‡æ–°æ€è€ƒç¼“å­˜Hookçš„ä½¿ç”¨</a></li></ul><p>ä»Šå¤©å†™éœ€æ±‚çš„æ—¶å€™è¢«mentoræ•²æ‰“äº†ï¼Œè¯´éšä¾¿ç”¨<code>useCallback</code>ä¸å¥½ï¼Œä½†æ²¡æœ‰ç»†è¯´åŸå› ã€‚æ­¤å‰åœ¨è·Ÿå…¶ä»–è€å“¥äº¤æµçš„æ—¶å€™ä¹Ÿå‘Šè¯‰æˆ‘è¯´èƒ½ä¸ç”¨å°±ä¸ç”¨ï¼Œæˆ‘ä¹Ÿå¾ˆå¥½å¥‡ä¸ºä»€ä¹ˆï¼Œè¿™é‡Œå°±æ¥å¥½å¥½æ·±ç©¶ä¸€ä¸‹<code>useCallback</code>å’Œ<code>useMemo</code>ï¼Œä»¥åŠå®ƒä»¬åˆ°åº•åº”è¯¥åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ã€‚<s>ï¼ˆæœ€åå‘ç°è‡ªå·±ä¹‹å‰çš„ç†è§£å®Œå…¨é”™äº†ï¼‰</s></p><h2 id="ä»useMemoå¼€å§‹">ä»<code>useMemo</code>å¼€å§‹</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨react.devå®˜ç½‘çœ‹çœ‹å®ƒçš„å®šä¹‰ï¼š</p><blockquote><p><code>useMemo</code> is a React Hook that lets you cache the result of a calculation between re-renders.</p></blockquote><p>æ ¹æ®å®šä¹‰ï¼Œ<code>useMemo</code>çš„ä½œç”¨å¾ˆçº¯ç²¹ï¼š<strong>åœ¨ç»„ä»¶æ›´æ–°æ—¶ç¼“å­˜è®¡ç®—ç»“æœ</strong>ã€‚</p><h3 id="è®¡ç®—å±æ€§ï¼Ÿ">è®¡ç®—å±æ€§ï¼Ÿ</h3><p>ç†Ÿæ‚‰Vueçš„åŒå­¦è‚¯å®šç«‹åˆ»æƒ³åˆ°äº†<code>computed</code>è®¡ç®—å±æ€§ï¼Œä½†ä¸å°½ç„¶å¦‚æ­¤ï¼ˆè‡³å°‘åœ¨ä¼ ç»Ÿé€‰é¡¹å¼APIä¸­ï¼‰ã€‚åœ¨Reactä¸­çš„å‡½æ•°ç»„ä»¶å’ŒJSXè¯­æ³•é‡Œï¼Œå…¶å®å¯ä»¥ç›´æ¥å®šä¹‰ä¸€ä¸ªç”¨äºè®¡ç®—é€»è¾‘çš„å‡½æ•°ï¼Œå®ƒå¯ä»¥ä½œä¸ºé—­åŒ…å¯ä»¥ç›´æ¥è·å–çŠ¶æ€ï¼Œå¹¶åœ¨æ¯æ¬¡re-renderçš„è¿‡ç¨‹ä¸­éƒ½ä¼šé‡æ–°å®šä¹‰å’Œè¿è¡Œï¼Œå¹¶ä¸éœ€è¦åšç‰¹æ®Šçš„â€œå“åº”å¼ä¼˜åŒ–â€œï¼Œå¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function MemoDemo(props) &#123;</span><br><span class="line">  // ... some states definition</span><br><span class="line">  const calcProduct = () =&gt; &#123;</span><br><span class="line">    // ... some calculation</span><br><span class="line">  &#125;</span><br><span class="line">  const product = calcProduct()</span><br><span class="line">  const cachedProduct = useMemo(calcProduct, [...])</span><br><span class="line">  return &lt;div&gt;&#123;product&#125;&lt;/div&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­ä¸­ï¼Œ<strong>ç›´æ¥å®šä¹‰ä¸€ä¸ªé—­åŒ…å‡½æ•°å¹¶åœ¨æ¸²æŸ“æ—¶è°ƒç”¨å®ƒå°±å¯ä»¥å®ç°è¿ç®—é€»è¾‘çš„å°è£…</strong>ï¼Œé¿å…äº†<code>return</code>éƒ¨åˆ†çš„è¿‡åº¦å¤æ‚ã€‚</p><p>åœ¨Vue2ï¼ˆæˆ–è€…è¯´é€‰é¡¹å¼APIï¼‰ä¸­<code>computed</code>è®¡ç®—å±æ€§é™¤äº†ç”¨äºä¼˜åŒ–å¤–æ›´å¤šçš„æ˜¯å› ä¸ºåªæœ‰åœ¨<code>computed</code>ä¸­æ‰èƒ½æ‹¿åˆ°<code>data</code>å’Œ<code>props</code>ï¼›è€Œåœ¨Vue3é‡Œçš„<code>computed</code> Hookå°±å’ŒReactä¸­é€»è¾‘å‡ ä¹ç±»ä¼¼äº†ã€‚</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123;product&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">  // ... some states definition</span><br><span class="line">  </span><br><span class="line">  // Hook Style: åœ¨Vue3ç»„åˆå¼APIä¸­å’ŒReactåŸºæœ¬ä¸€è‡´</span><br><span class="line">  const calcProduct = () =&gt; &#123;...&#125;</span><br><span class="line">  const product = calcProduct()</span><br><span class="line">  const cachedProduct = computed(calcProduct)</span><br><span class="line">  </span><br><span class="line">  // Traditional: é€‰é¡¹å¼APIä¸­å¿…é¡»åœ¨ç»„ä»¶å†…éƒ¨æ‰èƒ½å¾—åˆ°å“åº”å¼çŠ¶æ€</span><br><span class="line">  data() &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  computed() &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></div><h3 id="useMemoçš„çœŸå®ç”¨é€”"><code>useMemo</code>çš„çœŸå®ç”¨é€”</h3><p>ä¸Šé¢æˆ‘ä»¬çŸ¥é“ï¼Œç›´æ¥åˆ›é€ é—­åŒ…å°±å¯ä»¥å®ç°ç±»ä¼¼â€œè®¡ç®—å±æ€§â€çš„åŠŸèƒ½ï¼Œå…¶å®ç°æ–¹æ³•æ˜¯åœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶éƒ½é‡æ–°ç”Ÿæˆå’Œè¿è¡Œé—­åŒ…å‡½æ•°ã€‚è€Œ<code>useMemo</code>å­˜åœ¨çš„æ„ä¹‰å°±æ˜¯å½“è¿™æ¬¡<strong>é‡æ–°è¿è¡Œå¼€é”€å¾ˆå¤§æ—¶å°½å¯èƒ½åœ°ä¼˜åŒ–ï¼ˆæ²¡æœ‰å¿…è¦å°±ä¸åˆ·æ–°ï¼‰ï¼Œé™ä½åŠ è½½æ—¶é—´</strong>ã€‚</p><h4 id="å‡å°‘ä¸å¿…è¦çš„è®¡ç®—">å‡å°‘ä¸å¿…è¦çš„è®¡ç®—</h4><div class="highlight-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memorized = <span class="title function_">useMemo</span>(expensiveCalculation, [deps])</span><br></pre></td></tr></table></figure></div><p><code>useMemo</code> å¯ä»¥åœ¨re-renderä¹‹é—´ç¼“å­˜å€¼ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§å¯ä»¥å‡å°‘ä¸å¿…çš„è®¡ç®—ï¼Œåªåœ¨ç›¸å…³é‡ï¼ˆdepsï¼‰æ›´æ–°æ—¶æ‰é‡æ–°è¿è¡Œè®¡ç®—è¿‡ç¨‹ï¼Œè¿™ä¹Ÿæ˜¯è¿™ä¸ªHookçš„æœ¬æ„ã€‚</p><p>æ¯”å¦‚åœ¨ä¸€ä¸ªç§‘å­¦è¿ç®—Appä¸­ï¼Œé™¤äº†è¿œç®—ç»“æœå¤–è¿˜æœ‰å¾ˆå¤šæ— å…³çš„çŠ¶æ€å¦‚<code>theme</code>ï¼Œå…¶ä»–æ— å…³å˜é‡ç­‰ï¼Œåœ¨è¿™äº›æ— å…³çŠ¶æ€ä¿®æ”¹æ—¶æœ‰å¯èƒ½å¸¦åŠ¨æ•´ä¸ªåº”ç”¨ä¸€èµ·åˆ·æ–°ï¼Œè¿™æ—¶å¦‚æœæœ‰<code>useMemo</code>æ¥ç¼“å­˜ç»“æœå°±å¯ä»¥é¿å…é‡æ–°è¿›è¡Œè¿ç®—ã€‚</p><h4 id="é¿å…å¤æ‚ç»„ä»¶æ„å¤–åˆ·æ–°">é¿å…å¤æ‚ç»„ä»¶æ„å¤–åˆ·æ–°</h4><p>ç”±äºJSåœ¨**æ¯æ¬¡è¿è¡Œå½¢å¦‚<code>&#123;&#125;</code><strong><strong>çš„å­—é¢é‡æˆ–</strong></strong><code>function</code><strong><strong>å’Œ</strong></strong><code>()â‡’&#123;&#125;</code>**<strong>å£°æ˜çš„å‡½æ•°æ—¶éƒ½ä¼šç”Ÿæˆæ–°çš„å˜é‡</strong>ï¼ˆå…·ä½“æ¥è¯´æ˜¯æ–°çš„æŒ‡é’ˆå¼•ç”¨ï¼‰ï¼Œè€Œå½“æŒ‡é’ˆæ›´æ–°æ—¶è§¦å‘Reactæ›´æ–°ã€‚ï¼ˆå³ä½¿å®ƒä»¬çš„å†…å®¹å¯èƒ½æ˜¯å®Œå…¨ç›¸ç­‰çš„ï¼‰</p><p>è€ŒReactå‡½æ•°ç»„ä»¶å°±ç›¸å½“äºä¸€ä¸ªå‡½æ•°é—­åŒ…ï¼Œæ¯æ¬¡åˆ·æ–°ç»„ä»¶å°±ç›¸å½“äºé‡æ–°è¿è¡Œä¸€æ¬¡è¿™ä¸ªå‡½æ•°ï¼Œå…¶ä¸­çš„å¯¹è±¡å’Œå‡½æ•°éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æŒ‡é’ˆï¼Œè¿™å°±ä¼šå¯¼è‡´æ¥å—äº†è¿™äº›æ–°æŒ‡é’ˆä½œä¸ºpropsçš„ç»„ä»¶å¯èƒ½ä¼šåšæ— æ„ä¹‰çš„åˆ·æ–°ã€‚</p><ul><li>ä½¿ç”¨<code>memo</code>å£°æ˜å¯ç¼“å­˜ç»„ä»¶ï¼Œå¹¶ç”¨<code>useMemo</code>ç¼“å­˜ä¼ å…¥çš„<code>props</code></li><li>ç›´æ¥ä½¿ç”¨<code>useMemo</code>æ¥ç¼“å­˜ç»„ä»¶ï¼Œå¹¶æŠŠå˜é‡ï¼ˆReactNodeï¼‰ç›´æ¥ä¼ å…¥JSX</li></ul><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function ComplexComponent(props) =&gt; &#123;...&#125;</span><br><span class="line"></span><br><span class="line">// æ³•1:ä½¿ç”¨memoç¼“å­˜ç»„ä»¶ï¼ŒuseMemoç¼“å­˜props</span><br><span class="line">const CachedComplexComponent = memo(ComplexComponent(props))</span><br><span class="line"></span><br><span class="line">function App &#123;</span><br><span class="line">  const props = useMemo(..., [])</span><br><span class="line">  // æ³•2:ç›´æ¥ä½¿ç”¨useMemoç¼“å­˜JSXç»„ä»¶</span><br><span class="line">  const cachedComponent = useMemo(&lt;ComplexComponent ...props /&gt;, [props])</span><br><span class="line">  </span><br><span class="line">  // ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ•ˆæœæ˜¯ç­‰ä»·çš„</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;CachedComplexComponent props=&#123;props&#125; /&gt;</span><br><span class="line">      &#123;cachedComponent&#125;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><p>åè€…ä¹‹æ‰€ä»¥å¯è¡Œæ˜¯å› ä¸ºReact Nodeå®é™…ä¸Šä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šçš„JSå¯¹è±¡ï¼Œå¯¹åº”V-DOMä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤å¯ä»¥è¢«ç¼“å­˜å’Œè®¡ç®—ã€‚</p><p>ä½†å‰è€…æ˜¯æ›´ä¼ ç»Ÿçš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯æ›´æ¨èçš„åšæ³•ï¼Œå› ä¸ºç›´æ¥ä½¿ç”¨<code>useMemo</code>ç¼“å­˜æ•´ä¸ªç»„ä»¶ä¸èƒ½æ›´æ–¹ä¾¿åœ°é€‰æ‹©å“ªäº›æƒ…å†µä¸‹ç¼“å­˜ï¼Œè€Œ<code>memo</code>å¯ä»¥ç›´æ¥ç¼“å­˜å¯¹åº”propsã€‚</p><h3 id="åˆ·æ–°åˆ¤æ–­æœºåˆ¶">åˆ·æ–°åˆ¤æ–­æœºåˆ¶</h3><p>æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œåœ¨æ–°çš„ç¼“å­˜Hookå¦‚<code>useMemo</code>å’Œ<code>useCallback</code>ä¸­éƒ½ä½¿ç”¨äº†<code>Object.is</code>æ¥åˆ¤æ–­ç›¸ç­‰ï¼Œè€Œæ­¤å‰å°±å­˜åœ¨çš„APIå¦‚<code>React.memo</code>åˆ™ä½¿ç”¨ä¼ ç»Ÿçš„å¼•ç”¨ç›¸ç­‰ï¼ˆå…¨ç­‰<code>===</code>ï¼‰æ¥åˆ¤æ–­ç›¸ç­‰ã€‚</p><p><code>Object.is</code> ä¾æ®ä»¥ä¸‹åŸåˆ™åˆ¤æ–­ç›¸ç­‰ï¼š</p><ul><li>ç›¸åŒçš„å­—é¢é‡æˆ–å€¼ï¼Œå¦‚<code>undefined</code>, <code>null</code>, <code>true</code>, å­—ç¬¦ä¸²ç­‰</li><li>å¯¹è±¡å¼•ç”¨ç›¸åŒï¼ˆæŒ‡é’ˆå€¼ç›¸ç­‰ï¼‰</li></ul><p><code>Object.is</code>å’Œ<code>===</code>å”¯ä¸€çš„åŒºåˆ«æ˜¯å¤„ç†+0ï¼Œ-0å’ŒNaNæ—¶ï¼Œ<code>Object.is</code>å°†ä»–ä»¬åˆ†å¼€çœ‹å¾…ï¼Œè€Œ<code>===</code>å°†-0å’Œ+0è§†ä½œç›¸ç­‰ï¼Œæ¯ä¸ªNaNéƒ½æ˜¯ä¸åŒçš„å¼•ç”¨ã€‚</p><blockquote><p><code>==</code> åœ¨æ¯”è¾ƒå‰ä¼šè¿›è¡Œéšå¼è½¬æ¢ï¼Œè¿™å¯¼è‡´äº†è®¸å¤šæ½œåœ¨é—®é¢˜ï¼Œç›®å‰å”¯ä¸€æœ‰ç”¨çš„åº”ç”¨å¯èƒ½æ˜¯<code>== null</code>ç”¨äºåˆ¤æ–­ç©ºå€¼</p></blockquote><h3 id="ä¸ºä»€ä¹ˆä¸è¦éšä¾¿ç”¨useMemo">ä¸ºä»€ä¹ˆä¸è¦éšä¾¿ç”¨<code>useMemo</code></h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¤§éƒ¨åˆ†è¿ç®—æ˜¯è¶³å¤Ÿå¿«çš„ï¼Œä¸éœ€è¦å¯¹å…¶ä¼˜åŒ–å°±å¯ä»¥æµç•…è¿è¡Œï¼ˆé™¤éä½ å·²ç»æ„Ÿè§‰åˆ°äº†å› è®¡ç®—äº§ç”Ÿçš„å¡é¡¿ï¼‰ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¼€å‘æ—¶ï¼ˆDev Modeï¼‰å¾—åˆ°çš„æ€§èƒ½æŒ‡æ ‡å¾€å¾€æ˜¯ä¸å‡†ç¡®çš„ï¼Œä»–ä»¬å¾€å¾€å’Œå®é™…ç”Ÿäº§ç¯å¢ƒæœ‰ä¸€äº›åŒºåˆ«ï¼š</p><ul><li>å¼€å‘æœºä¸€èˆ¬æ¯”ç”¨æˆ·æœºæ›´å¿«ï¼ˆå¯ä»¥ä½¿ç”¨Chromeçš„CPU Throttleæ¨¡æ‹Ÿï¼‰</li><li>React StrictModeä¼šé‡å¤è¿›è¡Œä¸¤æ¬¡æ¸²æŸ“</li><li>React Dev Toolä¼šæ¶ˆè€—é¢å¤–çš„èµ„æº</li></ul><p>å› æ­¤ï¼Œè€ƒè™‘åˆ°å®é™…æƒ…å†µï¼ŒçœŸæ­£éœ€è¦ç”¨åˆ°<code>useMemo</code>çš„åœºæ™¯å…¶å®å‡ºä¹æ„æ–™çš„å°‘ï¼š</p><ul><li>å½“ä¸€ä¸ªè¿ç®—è¿‡ç¨‹è‚‰çœ¼å¯è§åœ°æ‹–æ…¢äº†å“åº”é€Ÿåº¦ï¼Œä¸”<strong>è®¡ç®—å®ƒæ‰€éœ€çš„å˜é‡å…¶å®å¾ˆå°‘å‘ç”Ÿå˜åŒ–</strong>æ—¶</li><li>å½“æŸä¸ªå€¼ä½œä¸ºpropsè¢«ä¼ å…¥äº†ä¸€ä¸ªä½“é‡å¾ˆå¤§çš„ç»„ä»¶ï¼ˆå®ƒæœ¬èº«çš„è®¡ç®—å¯èƒ½å¾ˆç®€å•ï¼Œä½†å®ƒç‰µåŠ¨çš„ç»„ä»¶æ›´æ–°å¾ˆå¤æ‚ï¼ï¼‰ï¼Œä¸”<strong>è®¡ç®—å®ƒæ‰€éœ€çš„å˜é‡å…¶å®å¾ˆå°‘å‘ç”Ÿå˜åŒ–</strong>æ—¶ï¼ˆéœ€è¦æ­é…<code>memo</code>ä½¿ç”¨ï¼‰</li><li><strong>å½“æŸä¸ªå€¼ä½œä¸ºå…¶ä»–Hookçš„depsæ—¶ï¼Œå¿…é¡»å°†å…¶ç¼“å­˜æ¥é¿å…é‡å¤åˆ·æ–°</strong>ï¼ˆå‡†ç¡®åœ°è¯´åº”è¯¥æ˜¯ä»»ä½•ä¼šåœ¨å‡½æ•°é‡æ–°è¿è¡Œæ—¶ç”Ÿæˆæ–°å€¼çš„å˜é‡åœ¨ä½œä¸ºdepsæ—¶éƒ½åº”è¯¥è¢«ç¼“å­˜ï¼Œå¦‚å¯¹è±¡å­—é¢é‡å’Œå‡½æ•°ï¼‰</li></ul><h4 id="useMemo-çš„æ€§èƒ½å¼€é”€"><code>useMemo</code> çš„æ€§èƒ½å¼€é”€</h4><p>ä½¿ç”¨<code>useMemo</code>è¿›è¡Œä¼˜åŒ–å®é™…ä¸Šå¯ä»¥çœ‹æˆä¸¤ä¸ªä¸åŒçš„é˜¶æ®µï¼š</p><ul><li>é¦–æ¬¡è¿è¡Œï¼ˆmountï¼‰ï¼šè¿ç®—è¿‡ç¨‹ä¸€å®šä¼šè¿è¡Œï¼Œ<code>useMemo</code>å¹¶ä¸èƒ½ä¼˜åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œç”šè‡³ä¼šå¼•å…¥é¢å¤–çš„å¼€é”€</li><li>ç»„ä»¶æ›´æ–°ï¼ˆupdateï¼‰ï¼š<code>useMemo</code>æ ¹æ®depsæ•°ç»„å†…ä¾èµ–é¡¹ï¼Œ<strong>ä½¿ç”¨</strong>**<code>Object.is</code>æ¯”è¾ƒ**å†³å®šæ˜¯ä½¿ç”¨ç¼“å­˜å€¼è¿˜æ˜¯é‡æ–°è¿è¡Œè®¡ç®—è¿‡ç¨‹</li></ul><p>è€Œ<code>useMemo</code>çš„æ€§èƒ½å¼€é”€ä¹Ÿå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>è¿ç®—å¼€é”€ï¼šè¿ç®—è¿‡ç¨‹æœ¬èº«ä¸€å®šä¼šäº§ç”Ÿçš„å¼€é”€</li><li>é¢å¤–å¼€é”€ï¼š<code>useMemo</code>ä¸ºäº†åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ç¼“å­˜å€¼å¼•å…¥çš„å¼€é”€</li></ul><p>ä¹Ÿå°±æ˜¯è¯´æ˜¯å¦éœ€è¦å¼•å…¥<code>useMemo</code>æ¥ä¼˜åŒ–æ€§èƒ½å˜æˆäº†ä¸¤ç§å¼€é”€çš„trade-offé—®é¢˜ã€‚</p><p>æ ¹æ®<a class="link" target="_blank" rel="noopener" href="https://medium.com/swlh/should-you-use-usememo-in-react-a-benchmarked-analysis-159faf6609b7" title="è¿™ç¯‡åšå®¢">è¿™ç¯‡åšå®¢ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯¹<code>useMemo</code>è¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Œå¹¶æ›´æ”¹å¾ªç¯çš„è¿è¡Œæ¬¡æ•°è¿›è¡Œé‡å¤å®éªŒï¼Œè¯•å›¾æ‰¾å‡ºä½¿ç”¨<code>useMemo</code>çš„â€œç”œèœœç‚¹â€œï¼ˆè™½ç„¶å¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦è¿™ä¹ˆåšï¼‰ã€‚</p><p><img lazyload src="/images/loading.svg" data-src="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163301.png" alt="" title="n=1çš„æ€§èƒ½å¼€é”€å¯¹æ¯”"></p><p>ä»n=1çš„æµ‹è¯•ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæœªmemoçš„è¿ç®—æ—¶é—´åŸºæœ¬ä¿æŒç¨³å®šï¼Œè€Œmemoåçš„ç»“æœè™½è¯´å·®åˆ«ä»å¾ˆå°ï¼Œä½†å¯ä»¥çœ‹å‡º<strong>åœ¨è¿™æ ·è½»é‡çº§çš„è®¡ç®—ä¸‹å¼•å…¥memoåœ¨é¦–æ¬¡æ¸²æŸ“å’Œåç»­æ›´æ–°éƒ½ä¼šæ‹–æ…¢é€Ÿåº¦</strong>ï¼Œæ˜¾ç„¶æ˜¯å¾—ä¸å¿å¤±çš„ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä¾¿åœ¨è¿™ç§æ•°é‡çº§ä¸‹ï¼Œmemoä»ç›¸æ¯”é‡æ–°è®¡ç®—æœ‰è¿‘19%çš„è½åå¹…åº¦ã€‚</p><p><img lazyload src="/images/loading.svg" data-src="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163304.png" alt="" title="n=100æ—¶çš„æ€§èƒ½å¼€é”€å¯¹æ¯”"></p><p>åœ¨n=100çš„ç¯èŠ‚ä¸‹<code>useMemo</code>å¼€å§‹é€æ¸æŒ½å›é¢œé¢ï¼Œåœ¨åç»­æ›´æ–°ç¯èŠ‚ä¸­ä¼¼ä¹æ¯”åŸç”Ÿæ–¹æ³•è¦å¿«é‚£ä¹ˆä¸€ä¸ç‚¹å„¿ï¼Œä½†é¦–æ¬¡æ¸²æŸ“ä»æ˜¾è‘—åœ°æ…¢äºåŸç”Ÿæ–¹æ³•ã€‚</p><p>è¿™è¯æ˜äº†æ­¤å‰<strong>å¤§éƒ¨åˆ†çš„è®¡ç®—è¿‡ç¨‹éƒ½ä¸éœ€è¦ç”¨memoç¼“å­˜</strong>çš„ç»“è®ºã€‚</p><p><img lazyload src="/images/loading.svg" data-src="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163311.png" alt=""></p><p>åœ¨n=1000çš„æƒ…å†µä¸‹å‘ç”Ÿäº†æœ‰è¶£çš„ç°è±¡ï¼Œå³<code>useMemo</code>åœ¨é¦–æ¬¡è¿è¡Œæ—¶çš„å¼€é”€æš´æ¶¨äº†ï¼Œä¸æ­¤åŒæ—¶é‡å¤æ¸²æŸ“çš„å¼€é”€å¹¶æ²¡æœ‰æ˜æ˜¾ä¼˜äºåŸç”Ÿæ–¹æ³•ï¼ˆçº¦37%ï¼‰ã€‚è¿™å¯èƒ½æ˜¯ç”±äº<code>useMemo</code>éœ€è¦å¯¹è¿ç®—ç»“æœè¿›è¡Œç¼“å­˜çš„ç¼˜æ•…ã€‚</p><p><img lazyload src="/images/loading.svg" data-src="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163316.png" alt=""></p><p>åœ¨n=5000æ—¶ï¼Œ<code>useMemo</code>ç»ˆäºå¼€å§‹å‘æŒ¥ä½œç”¨ã€‚è™½ç„¶åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶<code>useMemo</code>èŠ±è´¹äº†æ˜¾è‘—çš„é¢å¤–æ—¶é—´ç”¨äºç¼“å­˜ç»“æœï¼Œä½†åœ¨åç»­çš„æ¸²æŸ“ä¸­è·å¾—äº†å–œäººçš„æå‡ã€‚</p><blockquote><p>â­å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½ ä¸éœ€è¦<code>useMemo</code>æ¥ç¼“å­˜è¿ç®—ç»“æœï¼Œé™¤éé‡æ–°è¿ç®—è®©ä½ æ„Ÿå—åˆ°äº†å¡é¡¿</p></blockquote><h2 id="å†çœ‹useCallback">å†çœ‹<code>useCallback</code></h2><p>ç…§ä¾‹æˆ‘ä»¬åœ¨ä»react.devå®˜æ–¹çœ‹çœ‹å…¶å®šä¹‰ï¼š</p><blockquote><p><code>useCallback</code> is a React Hook that lets you cache a function definition between re-renders.</p></blockquote><p>å®šä¹‰å¾ˆç®€å•ï¼Œå’Œ<code>useMemo</code>ç›¸æ¯”çš„åŒºåˆ«å°±æ˜¯ä¸€ä¸ªç¼“å­˜å‡½æ•°çš„è¿”å›å€¼ï¼Œä¸€ä¸ªç¼“å­˜å‡½æ•°æœ¬èº«ã€‚</p><div class="highlight-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cachedFn = <span class="title function_">useCallback</span>(fn, dependencies)</span><br></pre></td></tr></table></figure></div><ul><li>åœ¨ç»„ä»¶é¦–æ¬¡åŠ è½½æ—¶ï¼Œ<code>useCallback</code> ç›´æ¥è¿”å›<code>fn</code></li><li>åœ¨ç»„ä»¶åˆ·æ–°æ—¶ï¼Œ<code>useCallback</code>æ ¹æ®<code>deps</code>æ˜¯å¦æ›´æ–°å†³å®šè¿”å›ä¸Šæ¬¡å¾—åˆ°çš„<code>fn</code>è¿˜æ˜¯é‡æ–°è®¡ç®—<code>fn</code>çš„é—­åŒ…</li></ul><p>ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œ<code>useCallback</code> å¯ä»¥çœ‹ä½œ<code>useMemo</code>çš„è¯­æ³•ç³–ï¼š</p><div class="highlight-container" data-rel="Javascript"><figure class="iseeu highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Simplified implementation (inside React)</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useCallback</span>(<span class="params">fn, dependencies</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> fn, dependencies);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="useCallbackçš„çœŸæ­£ç”¨é€”"><code>useCallback</code>çš„çœŸæ­£ç”¨é€”</h3><p>è¿™æ—¶æœ‰åŒå­¦å°±è¦å‘å‡ºç–‘é—®äº†ï¼Œå°†å‡½æ•°ç¼“å­˜èµ·æ¥æœ‰ä»€ä¹ˆç”¨å—ï¼Ÿåˆå§‹åŒ–ä¸€ä¸ªå‡½æ•°çœŸçš„æœ‰å¾ˆå¤§å¼€é”€å—ï¼Ÿå†å¤æ‚çš„å‡½æ•°ä¸è¿è¡Œå®ƒå¼€é”€ä¹Ÿä¸ä¼šå¾ˆå¤§å‘€ã€‚</p><p>æˆ‘åœ¨è¿™é‡Œè¦è¯´ï¼š<strong>ä½ è¯´å¾—å¯¹ï¼</strong></p><p>ä¸ä»…åˆ›å»ºå‡½æ•°é—­åŒ…æ²¡æœ‰ä»»ä½•æ€§èƒ½é—®é¢˜ï¼ˆReactå®˜æ–¹æ‰¿è¯ºï¼‰ï¼Œè€Œä¸”**<code>useCallback</code>**<strong>æ€»æ˜¯ä¼šå¼•å…¥é¢å¤–çš„å¼€é”€ï¼Œå› ä¸ºå‡½æ•°æ€»æ˜¯ä¼šè¢«åˆ›å»ºï¼Œè¿™æ˜¯ä¸å¯é¿å…çš„ï¼</strong></p><p><img lazyload src="/images/loading.svg" data-src="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163327.png" alt=""></p><p>å› æ­¤ï¼Œå¦‚æœä½ æƒ³ç”¨<code>useCallback</code>æ¥â€œä¼˜åŒ–â€œæ‰€è°“å‡½æ•°åˆ›å»ºè¿‡ç¨‹ï¼Œé‚£ä¸èƒ½è¯´æ˜¯å—è¾•åŒ—è¾™ï¼Œåªèƒ½è¯´æ˜¯èƒŒé“è€Œé©°ã€‚</p><p>è€Œ<code>useCallback</code>çœŸæ­£çš„å”¯ä¸€ç”¨å¤„æ˜¯**é…åˆ<code>memo</code>**<strong>ä¼˜åŒ–ç»„ä»¶åˆ·æ–°è¿‡ç¨‹</strong>ï¼Œç”¨æ¥é¿å…è­¬å¦‚å¤æ‚è¡¨å•é¡¶å±‚ç»„ä»¶ä¸­<code>handleSubmit</code>è¿™æ ·çš„å›è°ƒä¼ é€’å¼•èµ·çš„åˆ·æ–°é—®é¢˜ï¼Œ<code>useCallback</code>å¯ä»¥è®©<code>handleSubmit</code>ä¸é‡æ–°ç”Ÿæˆï¼Œè¿”å›ç›¸åŒçš„å‡½æ•°æŒ‡é’ˆæ¥é¿å…åˆ·æ–°ã€‚</p><blockquote><p>â­<code>useCallback</code>ä¸€å®šå’Œ<code>memo</code>ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œå¦åˆ™æ²¡æœ‰æ„ä¹‰ã€‚</p></blockquote><p>ä¸‹é¢è¿™ä¸ªç®€å•çš„ä¾‹å­å¯ä»¥è§£é‡Š<code>useCallback</code>çš„å·¥ä½œæ•ˆæœï¼š</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Demo() &#123;</span><br><span class="line">  const [state, setState] = useState(0);</span><br><span class="line">  const log = () =&gt; &#123;</span><br><span class="line">    console.log(state);</span><br><span class="line">  &#125;;</span><br><span class="line">  return &lt;button onClick=&#123;() =&gt; () =&gt; setState((prev) =&gt; prev++)&#125;&gt;&#123;state&#125;&lt;/button&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>åœ¨ä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­ä¸­ï¼Œ<code>Demo</code>ç»„ä»¶å…¶å®æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œå…¶å†…çš„<code>log</code> å‡½æ•°å°±æ˜¯åŒ…å«<code>state</code>çš„é—­åŒ…ï¼Œæ¯æ¬¡æŒ‰ä¸‹æŒ‰é’®åˆ·æ–°ç»„ä»¶æ—¶ï¼Œ<code>log</code> å˜é‡å°±ä¼šè¢«æ•´ä¸ªé‡æ–°åˆå§‹åŒ–ä¸€éï¼Œå°†å…¶å†…çš„<code>state</code>åˆ·æ–°æˆæœ€æ–°çš„å€¼ã€‚</p><p>è€Œä¸‹é¢è¿™ä¸ªä¾‹å­å¼•å…¥äº†<code>useCallback</code>ï¼Œè¿è¡Œåæˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹å‡ºåŒºåˆ«ï¼š</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Demo() &#123;</span><br><span class="line">  const [state, setState] = useState(0);</span><br><span class="line">  const cachedLog = useCallback(() =&gt; &#123;</span><br><span class="line">    console.log(state);</span><br><span class="line">  &#125;, []);</span><br><span class="line">  return &lt;button onClick=&#123;() =&gt; () =&gt; setState((prev) =&gt; prev++)&#125;&gt;&#123;state&#125;&lt;/button&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™ä¸ªä¾‹å­ä¸­ç”±äº<code>deps</code>æ•°ç»„ä¸ºç©ºï¼Œå› æ­¤åªä¼šåœ¨ç»„ä»¶é¦–æ¬¡åŠ è½½æ—¶è¿”å›ä¸€æ¬¡<code>fn</code>ï¼Œåç»­éƒ½ä½¿ç”¨ç¼“å­˜çš„å€¼ï¼Œå› æ­¤æ— è®ºæ€ä¹ˆè°ƒç”¨<code>cachedLog</code>éƒ½åªä¼šæ‰“å°åˆå§‹å€¼0ã€‚</p><p><img lazyload src="/images/loading.svg" data-src="https://picgo-1308055782.cos.ap-chengdu.myqcloud.com/bd-mac/2023%2F08%2F20230822163333.gif" alt="" title="ä¸€ä¸ªå¤§æ¦‚ä¸€æ ·çš„ä¾‹å­ï¼ˆæ‡’å¾—ä»é›¶å¼€å§‹é…è„šæ‰‹æ¶ï¼‰"></p><h3 id="ä»€ä¹ˆæ—¶å€™éœ€è¦useCallback">ä»€ä¹ˆæ—¶å€™éœ€è¦<code>useCallback</code></h3><blockquote><p>âš ï¸**ä¸è¦å†å‚»å‚»åœ°å°†<code>useCallback</code>**<strong>ç”¨äºä¼˜åŒ–å‡½æ•°åˆ›å»ºäº†ï¼</strong></p></blockquote><p>å› æ­¤å’Œ<code>useMemo</code>ç±»ä¼¼ï¼Œ<code>useCallback</code>çš„é€‚ç”¨åœºæ™¯æ›´çª„ï¼Œåªæœ‰åœ¨ä»¥ä¸‹ä¸¤ä¸ªåœºæ™¯æ‰æ˜¯æœ‰ä»·å€¼çš„ï¼š</p><ul><li>éœ€è¦å°†ä¸€ä¸ªå›è°ƒå‡½æ•°ä¼ ç»™<code>memo</code>ç»„ä»¶ï¼Œä¸”ä¸å¸Œæœ›è¯¥ç»„ä»¶å› ä¸ºå›è°ƒå‡½æ•°çš„åˆ·æ–°è€Œæ„å¤–æ›´æ–°ï¼ˆå°¤å…¶æ˜¯åœ¨ç»†ç²’åº¦æ›´æ–°çš„åº”ç”¨ä¸­ï¼‰</li><li>å›è°ƒå‡½æ•°åœ¨å…¶ä»–Hookï¼ˆå¦‚<code>useEffect</code>ï¼‰ä¸­è¢«è°ƒç”¨å¹¶ä½œ<code>deps</code>è¢«ä¼ å…¥ï¼Œå¦‚æœä¸ä½¿ç”¨<code>useCallback</code>ç¼“å­˜èµ·æ¥å°±ä¼šå¯¼è‡´å¾ªç¯åˆ·æ–°</li><li><strong>åœ¨ç¼–å†™è‡ªå®šä¹‰Hookæ—¶ï¼Œå¯¹å¤–æš´éœ²çš„å‡½æ•°éƒ½åº”è¯¥ç”¨</strong>**<code>useCallback</code>**<strong>åŒ…è£¹ï¼Œç¡®ä¿è°ƒç”¨è€…å¯ä»¥æ­£å¸¸ä¼˜åŒ–</strong></li></ul><p>ä½†ä¸Šè¿°ä¸¤ç§æƒ…å†µæˆ–å¤šæˆ–å°‘éƒ½æœ‰å…¶ä»–çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚ä½ å¯ä»¥<strong>å°†è¢«ç¼“å­˜çš„å‡½æ•°ç§»åˆ°Effectå‡½æ•°ä½“å†…éƒ¨</strong>ä½œä¸ºé—­åŒ…ï¼Œè¿™æ ·å¯ä»¥é¿å…é¢å¤–çš„å¼€é”€ã€‚</p><h3 id="å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆ">å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆ</h3><p>å…¶å®åœ¨å¾ˆå¤šæ—¶å€™æ¯”èµ·ä½¿ç”¨<code>useCallback</code>ç¼“å­˜å›è°ƒå‡½æ•°ï¼Œæˆ‘ä»¬æœ‰å…¶ä»–æ›´â€œé«˜æ˜â€œçš„æ–¹æ³•æ¥é¿å…åˆ·æ–°ã€‚</p><h4 id="useEffecté—­åŒ…"><code>useEffect</code>é—­åŒ…</h4><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬åœ¨<code>useEffect</code>ä¸­è°ƒç”¨çš„å‡½æ•°å®é™…ä¸Šä¸éœ€è¦æ”¾åœ¨é¡¶å±‚ä½œç”¨åŸŸä¸­ï¼Œæ”¾åœ¨<code>useEffect</code>å‡½æ•°ä½“å†…éƒ¨ä½œä¸ºé—­åŒ…æ˜¯æ›´å¥½çš„åšæ³•ï¼Œè¿™é¿å…äº†<code>useCallback</code>çš„é¢å¤–å¼€é”€ã€‚ï¼ˆç”¨äºåˆ¤æ–­å‡½æ•°æ˜¯å¦æ›´æ–°ï¼‰</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function Demo() &#123;</span><br><span class="line">  const cachedInit = useCallback(() =&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;, [...])</span><br><span class="line">  </span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    const init = () =&gt; &#123;</span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">    init()</span><br><span class="line">  &#125;, [])</span><br><span class="line">  </span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    cachedInit()</span><br><span class="line">  &#125;, [cachedInit])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå‰åä¸¤ä¸ª<code>useEffect</code>çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†å‰è€…é¿å…äº†<code>useCallback</code>çš„å¼€é”€ï¼Œæ˜¾ç„¶æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p><h4 id="ä½¿ç”¨useReducer">ä½¿ç”¨<code>useReducer</code></h4><p>åœ¨<a class="link" target="_blank" rel="noopener" href="https://www.wolai.com/k44NGUFnTypMDzGP5BxyNB" title="redux">redux <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ä¸€æ–‡ä¸­æˆ‘ä»¬äº†è§£åˆ°äº†storeå’Œreduceræœºåˆ¶ï¼Œè€Œåªè¦<code>store</code> æœ¬èº«ä¸å˜ï¼Œæ— è®ºçŠ¶æ€å¦‚ä½•æ”¹å˜ï¼Œ<code>dispatch</code>æ˜¯ä¸ä¼šæ”¹å˜çš„ã€‚</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>useContext</code> + <code>useReducer</code>ï¼Œç”¨<code>dispatch</code>æ¥ä»£æ›¿<code>useCallback</code> å›è°ƒå‡½æ•°æ¥æ‰§è¡Œæ“ä½œï¼Œä¹Ÿå¯ä»¥ç»•è¿‡ç¼“å­˜æ¥é¿å…åˆ·æ–°ã€‚</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const TodosDispatch = React.createContext(null);</span><br><span class="line"></span><br><span class="line">function TodosApp() &#123;</span><br><span class="line">  // Note: `dispatch` won&#x27;t change between re-renders</span><br><span class="line">  const [todos, dispatch] = useReducer(todosReducer);</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;TodosDispatch.Provider value=&#123;dispatch&#125;&gt;</span><br><span class="line">      &lt;DeepTree todos=&#123;todos&#125; /&gt;</span><br><span class="line">    &lt;/TodosDispatch.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="é‡æ–°æ€è€ƒç¼“å­˜Hookçš„ä½¿ç”¨">é‡æ–°æ€è€ƒç¼“å­˜Hookçš„ä½¿ç”¨</h2><blockquote><p>ğŸ”¥ä»…åº”è¯¥ä½¿ç”¨<code>useCallback</code>å’Œ<code>useMemo</code>æ¥ä½œä¸ºæ€§èƒ½ä¼˜åŒ–æ‰‹æ®µï¼Œè€Œä¸æ˜¯å®ç°ä¸šåŠ¡é€»è¾‘ï¼ˆæ„æ€æ˜¯ç¦»å¼€äº†è¿™äº›ç¼“å­˜Hookä¹Ÿåº”è¯¥ä¿æŒåŠŸèƒ½ä¸€è‡´ï¼Œåªæœ‰æ€§èƒ½å·®åˆ«ï¼‰ã€‚</p></blockquote><p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œè®°å¿†åŒ–ç¼“å­˜ï¼ˆmemorizationï¼‰éƒ½æ˜¯ä¸å¿…è¦çš„ã€‚æ¯”èµ·å¤§é‡ä½¿ç”¨<code>useMemo</code>å’Œ<code>useCallback</code>è¿™æ ·çš„ç¼“å­˜Hookï¼Œæˆ‘ä»¬æ›´åº”è¯¥ä»ä¼˜åŒ–ç»„ä»¶çš„ç»„ç»‡æ–¹å¼å’Œé€»è¾‘æœ¬èº«å…¥æ‰‹ã€‚</p><ul><li>ä½¿ç”¨<code>props.children</code>æ¥åœ¨è°ƒç”¨æ—¶å‘Wrapperç»„ä»¶ä¼ å…¥ç»„ä»¶ï¼Œè€Œä¸æ˜¯ç›´æ¥å†™åœ¨Wrapperç»„ä»¶çš„å£°æ˜ä¸­ï¼Œè¿™æ ·å¯ä»¥é¿å…å› Wrapperè‡ªå·±çŠ¶æ€å˜åŒ–å¯¼è‡´å†…éƒ¨ç»„ä»¶åˆ·æ–° <strong>ï¼ˆWhyï¼Ÿï¼‰</strong></li><li>ä½¿ç”¨æ ‘çŠ¶çŠ¶æ€æµï¼Œ<strong>å°†çŠ¶æ€å°½å¯èƒ½è¿‘åœ°ä¿å­˜åœ¨ä½¿ç”¨å®ƒçš„ç»„ä»¶å‘¨å›´ï¼Œé¿å…ä¸å¿…è¦çš„æå‡å’Œå…¨å±€çŠ¶æ€</strong>ä»¥é¿å…æ— å…³çŠ¶æ€æ›´æ–°å¯¼è‡´çš„åˆ·æ–°</li><li><strong>å°½å¯èƒ½ä¿æŒçº¯å‡½æ•°</strong>ï¼Œéµå¾ªå‡½æ•°å¼ç¼–ç¨‹åŸºæœ¬èŒƒå¼ï¼Œä¸è¦å¤§é‡ä¾èµ–å‰¯ä½œç”¨æ¥å®ç°é€»è¾‘ï¼ˆè¿™æ ·å¯ä»¥é¿å…ç”¨ä½œEffect Depsçš„ç¼“å­˜Hookä½¿ç”¨ï¼‰</li><li>å¦‚æœä½ ç¡®å®éœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸHookï¼Œè¯·å°½é‡åœ°å‡å°‘ä¾èµ–ï¼Œå› ä¸º<strong>å¤§éƒ¨åˆ†çš„ä¾èµ–å®é™…ä¸Šå¯ä»¥ä½œä¸ºé—­åŒ…æ”¾åœ¨Effectå‡½æ•°ä½“ä¸­æ¥å‡å°‘ä¸å¿…è¦çš„Hookå¼€é”€</strong></li></ul></div><div class="post-copyright-info"><div class="article-copyright-info-container"><ul><li><strong>æ ‡é¢˜:</strong> ä½ çœŸçš„éœ€è¦useMemoå’ŒuseCallbackå—</li><li><strong>ä½œè€…:</strong> ChlorineC</li><li><strong>åˆ›å»ºäº :</strong> 2023-08-25 12:20:08</li><li><strong>æ›´æ–°äº :</strong> 2023-08-25 12:20:08</li><li><strong>é“¾æ¥:</strong> https://redefine.ohevan.com/posts/2103510996/</li><li><strong>ç‰ˆæƒå£°æ˜: </strong>æœ¬æ–‡ç« é‡‡ç”¨ <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a> è¿›è¡Œè®¸å¯ã€‚</li></ul></div></div><ul class="post-tags-box"><li class="tag-item"><a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">#æ€§èƒ½ä¼˜åŒ–</a>&nbsp;</li><li class="tag-item"><a href="/tags/react/">#react</a>&nbsp;</li></ul><div class="article-nav"><div class="article-next"><a class="next" rel="next" href="/posts/2933489603/"><span class="title flex justify-center items-center"><span class="post-nav-title-item">ä»é›¶å¼€å§‹çš„SSRå…¥é—¨ä¹‹æ—…</span> <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span> </span><span class="right arrow-icon flex justify-center items-center"><i class="fa-solid fa-chevron-right"></i></span></a></div></div></div><div class="toc-content-container"><div class="post-toc-wrap"><div class="post-toc"><div class="toc-title">æ­¤é¡µç›®å½•</div><div class="page-title">ä½ çœŸçš„éœ€è¦useMemoå’ŒuseCallbackå—</div><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95"><span class="nav-text">ç›®å½•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8EuseMemo%E5%BC%80%E5%A7%8B"><span class="nav-text">ä»useMemoå¼€å§‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%EF%BC%9F"><span class="nav-text">è®¡ç®—å±æ€§ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#useMemo%E7%9A%84%E7%9C%9F%E5%AE%9E%E7%94%A8%E9%80%94"><span class="nav-text">useMemoçš„çœŸå®ç”¨é€”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%B7%E6%96%B0%E5%88%A4%E6%96%AD%E6%9C%BA%E5%88%B6"><span class="nav-text">åˆ·æ–°åˆ¤æ–­æœºåˆ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%A6%81%E9%9A%8F%E4%BE%BF%E7%94%A8useMemo"><span class="nav-text">ä¸ºä»€ä¹ˆä¸è¦éšä¾¿ç”¨useMemo</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%86%8D%E7%9C%8BuseCallback"><span class="nav-text">å†çœ‹useCallback</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#useCallback%E7%9A%84%E7%9C%9F%E6%AD%A3%E7%94%A8%E9%80%94"><span class="nav-text">useCallbackçš„çœŸæ­£ç”¨é€”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81useCallback"><span class="nav-text">ä»€ä¹ˆæ—¶å€™éœ€è¦useCallback</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88"><span class="nav-text">å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E6%96%B0%E6%80%9D%E8%80%83%E7%BC%93%E5%AD%98Hook%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">é‡æ–°æ€è€ƒç¼“å­˜Hookçš„ä½¿ç”¨</span></a></li></ol></div></div></div></div></div></div><div class="main-content-footer"><footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color"><div class="info-container py-3 text-center"><div class="text-center">&copy; <span>2023</span> - 2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration:0.5s;color:#f54545"></i>&nbsp;&nbsp;<a href="/">ChlorineC</a></div><script data-swup-reload-script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right"><span id="busuanzi_container_site_uv" class="lg:!block"><span class="text-sm">è®¿é—®äººæ•°</span> <span id="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" class="lg:!block"><span class="text-sm">æ€»è®¿é—®é‡</span> <span id="busuanzi_value_site_pv"></span></span></div><div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left"><span class="lg:block text-sm">ç”± <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="åœ–å±¤_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> é©±åŠ¨</span> <span class="text-sm lg:block">ä¸»é¢˜&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.4.4</a></span></div><div class="icp-info my-1"><a target="_blank" rel="nofollow" href="https://beian.miit.gov.cn">èœ€ICPå¤‡2022029268å·</a></div></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="article-tools-list"><li class="right-bottom-tools page-aside-toggle"><i class="fa-regular fa-outdent"></i></li></ul></div></div><div class="right-side-tools-container"><div class="side-tools-container"><ul class="hidden-tools-list"><li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center"><i class="fa-regular fa-magnifying-glass-plus"></i></li><li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center"><i class="fa-regular fa-magnifying-glass-minus"></i></li><li class="right-bottom-tools tool-expand-width flex justify-center items-center"><i class="fa-regular fa-expand"></i></li><li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center"><i class="fa-regular fa-moon"></i></li><li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center"><i class="fa-regular fa-arrow-up"></i></li><li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center"><i class="fa-regular fa-arrow-down"></i></li></ul><ul class="visible-tools-list"><li class="right-bottom-tools toggle-tools-list flex justify-center items-center"><i class="fa-regular fa-cog fa-spin"></i></li></ul></div></div><div class="image-viewer-container"><img src=""></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fa-solid fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="æœç´¢..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa-solid fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i></div></div></div></div></main><script src="/js/libs/Swup.min.js"></script><script src="/js/libs/SwupSlideTheme.min.js"></script><script src="/js/libs/SwupScriptsPlugin.min.js"></script><script src="/js/libs/SwupProgressPlugin.min.js"></script><script src="/js/libs/SwupScrollPlugin.min.js"></script><script>const swup=new Swup({plugins:[new SwupScriptsPlugin({optin:!0}),new SwupProgressPlugin,new SwupScrollPlugin({offset:80}),new SwupSlideTheme({mainElement:".main-content-body"})],containers:["#swup"]});swup.hooks.on("page:view",()=>{Global.refresh()})</script><script src="/js/utils.js" type="module"></script><script src="/js/main.js" type="module"></script><script src="/js/layouts/navbarShrink.js" type="module"></script><script src="/js/tools/scrollTopBottom.js" type="module"></script><script src="/js/tools/lightDarkSwitch.js" type="module"></script><script src="/js/layouts/categoryList.js" type="module"></script><script src="/js/tools/localSearch.js"></script><script src="/js/tools/codeBlock.js"></script><script src="/js/layouts/lazyload.js"></script><script src="/js/libs/Typed.min.js"></script><script src="/js/plugins/typed.js"></script><div class="post-scripts" data-swup-reload-script><script src="/js/libs/anime.min.js"></script><script src="/js/tools/tocToggle.js" type="module"></script><script src="/js/layouts/toc.js" type="module"></script><script src="/js/plugins/tabs.js" type="module"></script></div></body></html>